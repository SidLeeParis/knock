(function(){!function(a){a.fn.flowtype=function(b){var c=a.extend({maximum:9999,minimum:1,maxFont:9999,minFont:1,fontRatio:35},b),d=function(b){var d=a(b),e=d.width(),f=e>c.maximum?c.maximum:e<c.minimum?c.minimum:e,g=f/c.fontRatio,h=g>c.maxFont?c.maxFont:g<c.minFont?c.minFont:g;d.css("font-size",h+"px")};return this.each(function(){var b=this;a(window).resize(function(){d(b)}),d(this)})}}(jQuery),window.Modernizr=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+t.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+u.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.8.3",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString,"Webkit Moz O ms"),t=s.split(" "),u=s.toLowerCase().split(" "),v={},w=[],x=w.slice,y={}.hasOwnProperty;l=e(y,"undefined")||e(y.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return y.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=x.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(x.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(x.call(arguments)))};return d});for(var z in v)l(v,z)&&(k=z.toLowerCase(),n[k]=v[z](),w.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._domPrefixes=u,n._cssomPrefixes=t,n.testProp=function(a){return g([a])},n.testAllProps=i,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(this,this.document),Modernizr.addTest("getusermedia",!!Modernizr.prefixed("getUserMedia",navigator)),!function(a){function b(a){this.options=d.extend({},b.defaultOptions,a),this.clear()}function c(a){this.options=d.extend({},c.defaultChartOptions,a),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0}var d={extend:function(){arguments[0]=arguments[0]||{};for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]="object"==typeof arguments[a][b]?arguments[a][b]instanceof Array?arguments[a][b]:d.extend(arguments[0][b],arguments[a][b]):arguments[a][b]);return arguments[0]}};b.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},b.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},b.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var a=1;a<this.data.length;a++){var b=this.data[a][1];b>this.maxValue&&(this.maxValue=b),b<this.minValue&&(this.minValue=b)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},b.prototype.append=function(a,b,c){for(var d=this.data.length-1;d>=0&&this.data[d][0]>a;)d--;-1===d?this.data.splice(0,0,[a,b]):this.data.length>0&&this.data[d][0]===a?c?(this.data[d][1]+=b,b=this.data[d][1]):this.data[d][1]=b:d<this.data.length-1?this.data.splice(d+1,0,[a,b]):this.data.push([a,b]),this.maxValue=isNaN(this.maxValue)?b:Math.max(this.maxValue,b),this.minValue=isNaN(this.minValue)?b:Math.min(this.minValue,b)},b.prototype.dropOldData=function(a,b){for(var c=0;this.data.length-c>=b&&this.data[c+1][0]<a;)c++;0!==c&&this.data.splice(0,c)},c.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(a,b){return parseFloat(a).toFixed(b)},yMaxFormatter:function(a,b){return parseFloat(a).toFixed(b)},maxValueScale:1,minValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,scrollBackwards:!1,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2},horizontalLines:[]},c.AnimateCompatibility=function(){var a=function(a,b){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a((new Date).getTime())},16)};return c.call(window,a,b)},b=function(a){var b=window.cancelAnimationFrame||function(a){clearTimeout(a)};return b.call(window,a)};return{requestAnimationFrame:a,cancelAnimationFrame:b}}(),c.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"},c.prototype.addTimeSeries=function(a,b){this.seriesSet.push({timeSeries:a,options:d.extend({},c.defaultSeriesPresentationOptions,b)}),a.options.resetBounds&&a.options.resetBoundsInterval>0&&(a.resetBoundsTimerId=setInterval(function(){a.resetBounds()},a.options.resetBoundsInterval))},c.prototype.removeTimeSeries=function(a){for(var b=this.seriesSet.length,c=0;b>c;c++)if(this.seriesSet[c].timeSeries===a){this.seriesSet.splice(c,1);break}a.resetBoundsTimerId&&clearInterval(a.resetBoundsTimerId)},c.prototype.getTimeSeriesOptions=function(a){for(var b=this.seriesSet.length,c=0;b>c;c++)if(this.seriesSet[c].timeSeries===a)return this.seriesSet[c].options},c.prototype.bringToFront=function(a){for(var b=this.seriesSet.length,c=0;b>c;c++)if(this.seriesSet[c].timeSeries===a){var d=this.seriesSet.splice(c,1);this.seriesSet.push(d[0]);break}},c.prototype.streamTo=function(a,b){this.canvas=a,this.delay=b,this.start()},c.prototype.resize=function(){if(this.options.enableDpiScaling&&window&&1!==window.devicePixelRatio){var a=window.devicePixelRatio,b=parseInt(this.canvas.getAttribute("width")),c=parseInt(this.canvas.getAttribute("height"));this.originalWidth&&Math.floor(this.originalWidth*a)===b||(this.originalWidth=b,this.canvas.setAttribute("width",Math.floor(b*a).toString()),this.canvas.style.width=b+"px",this.canvas.getContext("2d").scale(a,a)),this.originalHeight&&Math.floor(this.originalHeight*a)===c||(this.originalHeight=c,this.canvas.setAttribute("height",Math.floor(c*a).toString()),this.canvas.style.height=c+"px",this.canvas.getContext("2d").scale(a,a))}},c.prototype.start=function(){if(!this.frame){var a=function(){this.frame=c.AnimateCompatibility.requestAnimationFrame(function(){this.render(),a()}.bind(this))}.bind(this);a()}},c.prototype.stop=function(){this.frame&&(c.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)},c.prototype.updateValueRange=function(){for(var a=this.options,b=Number.NaN,c=Number.NaN,d=0;d<this.seriesSet.length;d++){var e=this.seriesSet[d].timeSeries;isNaN(e.maxValue)||(b=isNaN(b)?e.maxValue:Math.max(b,e.maxValue)),isNaN(e.minValue)||(c=isNaN(c)?e.minValue:Math.min(c,e.minValue))}if(null!=a.maxValue?b=a.maxValue:b*=a.maxValueScale,null!=a.minValue?c=a.minValue:c-=Math.abs(c*a.minValueScale-c),this.options.yRangeFunction){var f=this.options.yRangeFunction({min:c,max:b});c=f.min,b=f.max}if(!isNaN(b)&&!isNaN(c)){var g=b-c,h=g-this.currentValueRange,i=c-this.currentVisMinValue;this.isAnimatingScale=Math.abs(h)>.1||Math.abs(i)>.1,this.currentValueRange+=a.scaleSmoothing*h,this.currentVisMinValue+=a.scaleSmoothing*i}this.valueRange={min:c,max:b}},c.prototype.render=function(a,b){var c=(new Date).getTime();if(!this.isAnimatingScale){var d=Math.min(1e3/6,this.options.millisPerPixel);if(c-this.lastRenderTimeMillis<d)return}this.resize(),this.lastRenderTimeMillis=c,a=a||this.canvas,b=b||c-(this.delay||0),b-=b%this.options.millisPerPixel;var e=a.getContext("2d"),f=this.options,g={top:0,left:0,width:a.clientWidth,height:a.clientHeight},h=b-g.width*f.millisPerPixel,i=function(a){var b=a-this.currentVisMinValue;return 0===this.currentValueRange?g.height:g.height-Math.round(b/this.currentValueRange*g.height)}.bind(this),j=function(a){return Math.round(f.scrollBackwards?(b-a)/f.millisPerPixel:g.width-(b-a)/f.millisPerPixel)};if(this.updateValueRange(),e.font=f.labels.fontSize+"px "+f.labels.fontFamily,e.save(),e.translate(g.left,g.top),e.beginPath(),e.rect(0,0,g.width,g.height),e.clip(),e.save(),e.fillStyle=f.grid.fillStyle,e.clearRect(0,0,g.width,g.height),e.fillRect(0,0,g.width,g.height),e.restore(),e.save(),e.lineWidth=f.grid.lineWidth,e.strokeStyle=f.grid.strokeStyle,f.grid.millisPerLine>0){e.beginPath();for(var k=b-b%f.grid.millisPerLine;k>=h;k-=f.grid.millisPerLine){var l=j(k);f.grid.sharpLines&&(l-=.5),e.moveTo(l,0),e.lineTo(l,g.height)}e.stroke(),e.closePath()}for(var m=1;m<f.grid.verticalSections;m++){var n=Math.round(m*g.height/f.grid.verticalSections);f.grid.sharpLines&&(n-=.5),e.beginPath(),e.moveTo(0,n),e.lineTo(g.width,n),e.stroke(),e.closePath()}if(f.grid.borderVisible&&(e.beginPath(),e.strokeRect(0,0,g.width,g.height),e.closePath()),e.restore(),f.horizontalLines&&f.horizontalLines.length)for(var o=0;o<f.horizontalLines.length;o++){var p=f.horizontalLines[o],q=Math.round(i(p.value))-.5;e.strokeStyle=p.color||"#ffffff",e.lineWidth=p.lineWidth||1,e.beginPath(),e.moveTo(0,q),e.lineTo(g.width,q),e.stroke(),e.closePath()}for(var r=0;r<this.seriesSet.length;r++){e.save();var s=this.seriesSet[r].timeSeries,t=s.data,u=this.seriesSet[r].options;s.dropOldData(h,f.maxDataSetLength),e.lineWidth=u.lineWidth,e.strokeStyle=u.strokeStyle,e.beginPath();for(var v=0,w=0,x=0,y=0;y<t.length&&1!==t.length;y++){var z=j(t[y][0]),A=i(t[y][1]);if(0===y)v=z,e.moveTo(z,A);else switch(f.interpolation){case"linear":case"line":e.lineTo(z,A);break;case"bezier":default:e.bezierCurveTo(Math.round((w+z)/2),x,Math.round(w+z)/2,A,z,A);break;case"step":e.lineTo(z,x),e.lineTo(z,A)}w=z,x=A}t.length>1&&(u.fillStyle&&(e.lineTo(g.width+u.lineWidth+1,x),e.lineTo(g.width+u.lineWidth+1,g.height+u.lineWidth+1),e.lineTo(v,g.height+u.lineWidth),e.fillStyle=u.fillStyle,e.fill()),u.strokeStyle&&"none"!==u.strokeStyle&&e.stroke(),e.closePath()),e.restore()}if(!f.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var B=f.yMaxFormatter(this.valueRange.max,f.labels.precision),C=f.yMinFormatter(this.valueRange.min,f.labels.precision),D=f.scrollBackwards?0:g.width-e.measureText(B).width-2;e.fillStyle=f.labels.fillStyle,e.fillText(B,D,f.labels.fontSize),e.fillText(C,D,g.height-2)}if(f.timestampFormatter&&f.grid.millisPerLine>0)for(var E=f.scrollBackwards?e.measureText(C).width:g.width-e.measureText(C).width+4,k=b-b%f.grid.millisPerLine;k>=h;k-=f.grid.millisPerLine){var l=j(k);if(!f.scrollBackwards&&E>l||f.scrollBackwards&&l>E){var F=new Date(k),G=f.timestampFormatter(F),H=e.measureText(G).width;E=f.scrollBackwards?l+H+2:l-H-2,e.fillStyle=f.labels.fillStyle,f.scrollBackwards?e.fillText(G,l,g.height-2):e.fillText(G,l-H,g.height-2)}}e.restore()},c.timeFormatter=function(a){function b(a){return(10>a?"0":"")+a}return b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())},a.TimeSeries=b,a.SmoothieChart=c}("undefined"==typeof exports?this:exports),!function(a){a.tracking=a.tracking||{},tracking.inherits=function(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.base=function(a,c){var d=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,d)}},tracking.initUserMedia_=function(b,c){a.navigator.getUserMedia({video:!0,audio:c.audio},function(c){try{b.src=a.URL.createObjectURL(c)}catch(d){b.src=c}},function(){throw Error("Cannot capture user camera.")})},tracking.isNode=function(a){return a.nodeType||this.isWindow(a)},tracking.isWindow=function(a){return!!(a&&a.alert&&a.document)},tracking.one=function(a,b){return this.isNode(a)?a:(b||document).querySelector(a)},tracking.track=function(a,b,c){if(a=tracking.one(a),!a)throw new Error("Element not found, try a different element or selector.");if(!b)throw new Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(a.nodeName.toLowerCase()){case"canvas":return this.trackCanvas_(a,b,c);case"img":return this.trackImg_(a,b,c);case"video":return c&&c.camera&&this.initUserMedia_(a,c),this.trackVideo_(a,b,c);default:throw new Error("Element not supported, try in a canvas, img, or video.")}},tracking.trackCanvas_=function(a,b){var c=this,d=new tracking.TrackerTask(b);return d.on("run",function(){c.trackCanvasInternal_(a,b)}),d.run()},tracking.trackCanvasInternal_=function(a,b){var c=a.width,d=a.height,e=a.getContext("2d"),f=e.getImageData(0,0,c,d);b.track(f.data,c,d)},tracking.trackImg_=function(a,b){var c=a.width,d=a.height,e=document.createElement("canvas");e.width=c,e.height=d;var f=new tracking.TrackerTask(b);return f.on("run",function(){tracking.Canvas.loadImage(e,a.src,0,0,c,d,function(){tracking.trackCanvasInternal_(e,b)})}),f.run()},tracking.trackVideo_=function(b,c){var d,e,f=document.createElement("canvas"),g=f.getContext("2d"),h=function(){d=b.offsetWidth,e=b.offsetHeight,f.width=d,f.height=e};h(),b.addEventListener("resize",h);var i,j=function(){i=a.requestAnimationFrame(function(){if(b.readyState===b.HAVE_ENOUGH_DATA){try{g.drawImage(b,0,0,d,e)}catch(a){}tracking.trackCanvasInternal_(f,c)}j()})},k=new tracking.TrackerTask(c);return k.on("stop",function(){a.cancelAnimationFrame(i)}),k.on("run",function(){j()}),k.run()},a.URL||(a.URL=a.URL||a.webkitURL||a.msURL||a.oURL),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}(window),function(){tracking.EventEmitter=function(){},tracking.EventEmitter.prototype.events_=null,tracking.EventEmitter.prototype.addListener=function(a,b){if("function"!=typeof b)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",a,b),this.events_[a]||(this.events_[a]=[]),this.events_[a].push(b),this},tracking.EventEmitter.prototype.listeners=function(a){return this.events_&&this.events_[a]},tracking.EventEmitter.prototype.emit=function(a){var b=this.listeners(a);if(b){for(var c=Array.prototype.slice.call(arguments,1),d=0;d<b.length;d++)b[d]&&b[d].apply(this,c);return!0}return!1},tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener,tracking.EventEmitter.prototype.once=function(a,b){var c=this;c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)})},tracking.EventEmitter.prototype.removeAllListeners=function(a){return this.events_?(a?delete this.events_[a]:delete this.events_,this):this},tracking.EventEmitter.prototype.removeListener=function(a,b){if("function"!=typeof b)throw new TypeError("Listener must be a function");if(!this.events_)return this;var c=this.listeners(a);if(Array.isArray(c)){var d=c.indexOf(b);if(0>d)return this;c.splice(d,1)}return this},tracking.EventEmitter.prototype.setMaxListeners=function(){throw new Error("Not implemented")}}(),function(){tracking.Canvas={},tracking.Canvas.loadImage=function(a,b,c,d,e,f,g){var h=this,i=new window.Image;i.onload=function(){var b=a.getContext("2d");a.width=e,a.height=f,b.drawImage(i,c,d,e,f),g&&g.call(h),i=null},i.src=b}}(),function(){tracking.DisjointSet=function(a){if(void 0===a)throw new Error("DisjointSet length not specified.");this.length=a,this.parent=new Uint32Array(a);for(var b=0;a>b;b++)this.parent[b]=b},tracking.DisjointSet.prototype.length=null,tracking.DisjointSet.prototype.parent=null,tracking.DisjointSet.prototype.find=function(a){return this.parent[a]===a?a:this.parent[a]=this.find(this.parent[a])},tracking.DisjointSet.prototype.union=function(a,b){var c=this.find(a),d=this.find(b);this.parent[c]=d}}(),function(){tracking.Image={},tracking.Image.blur=function(a,b,c,d){if(d=Math.abs(d),1>=d)throw new Error("Diameter should be greater than 1.");for(var e=d/2,f=Math.ceil(d)+(1-Math.ceil(d)%2),g=new Float32Array(f),h=(e+.5)/3,i=h*h,j=1/Math.sqrt(2*Math.PI*i),k=-1/(2*h*h),l=0,m=Math.floor(f/2),n=0;f>n;n++){var o=n-m,p=j*Math.exp(o*o*k);g[n]=p,l+=p}for(var q=0;q<g.length;q++)g[q]/=l;return this.separableConvolve(a,b,c,g,g,!1)},tracking.Image.computeIntegralImage=function(a,b,c,d,e,f,g){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var h;g&&(h=tracking.Image.sobel(a,b,c));for(var i=0;c>i;i++)for(var j=0;b>j;j++){var k=i*b*4+4*j,l=~~(.299*a[k]+.587*a[k+1]+.114*a[k+2]);if(d&&this.computePixelValueSAT_(d,b,i,j,l),e&&this.computePixelValueSAT_(e,b,i,j,l*l),f){var m=k-4*b,n=~~(.299*a[m]+.587*a[m+1]+.114*a[m+2]);this.computePixelValueRSAT_(f,b,i,j,l,n||0)}g&&this.computePixelValueSAT_(g,b,i,j,h[k])}},tracking.Image.computePixelValueRSAT_=function(a,b,c,d,e,f){var g=c*b+d;a[g]=(a[g-b-1]||0)+(a[g-b+1]||0)-(a[g-b-b]||0)+e+f},tracking.Image.computePixelValueSAT_=function(a,b,c,d,e){var f=c*b+d;a[f]=(a[f-b]||0)+(a[f-1]||0)+e-(a[f-b-1]||0)},tracking.Image.grayscale=function(a,b,c,d){for(var e=new Uint8ClampedArray(d?a.length:a.length>>2),f=0,g=0,h=0;c>h;h++)for(var i=0;b>i;i++){var j=.299*a[g]+.587*a[g+1]+.114*a[g+2];e[f++]=j,d&&(e[f++]=j,e[f++]=j,e[f++]=a[g+3]),g+=4}return e},tracking.Image.horizontalConvolve=function(a,b,c,d,e){for(var f=d.length,g=Math.floor(f/2),h=new Float32Array(b*c*4),i=e?1:0,j=0;c>j;j++)for(var k=0;b>k;k++){for(var l=j,m=k,n=4*(j*b+k),o=0,p=0,q=0,r=0,s=0;f>s;s++){var t=l,u=Math.min(b-1,Math.max(0,m+s-g)),v=4*(t*b+u),w=d[s];o+=a[v]*w,p+=a[v+1]*w,q+=a[v+2]*w,r+=a[v+3]*w}h[n]=o,h[n+1]=p,h[n+2]=q,h[n+3]=r+i*(255-r)}return h},tracking.Image.verticalConvolve=function(a,b,c,d,e){for(var f=d.length,g=Math.floor(f/2),h=new Float32Array(b*c*4),i=e?1:0,j=0;c>j;j++)for(var k=0;b>k;k++){for(var l=j,m=k,n=4*(j*b+k),o=0,p=0,q=0,r=0,s=0;f>s;s++){var t=Math.min(c-1,Math.max(0,l+s-g)),u=m,v=4*(t*b+u),w=d[s];o+=a[v]*w,p+=a[v+1]*w,q+=a[v+2]*w,r+=a[v+3]*w}h[n]=o,h[n+1]=p,h[n+2]=q,h[n+3]=r+i*(255-r)}return h},tracking.Image.separableConvolve=function(a,b,c,d,e,f){var g=this.verticalConvolve(a,b,c,e,f);return this.horizontalConvolve(g,b,c,d,f)},tracking.Image.sobel=function(a,b,c){a=this.grayscale(a,b,c,!0);for(var d=new Float32Array(b*c*4),e=new Float32Array([-1,0,1]),f=new Float32Array([1,2,1]),g=this.separableConvolve(a,b,c,e,f),h=this.separableConvolve(a,b,c,f,e),i=0;i<d.length;i+=4){var j=g[i],k=h[i],l=Math.sqrt(k*k+j*j);d[i]=l,d[i+1]=l,d[i+2]=l,d[i+3]=255}return d}}(),function(){tracking.ViolaJones={},tracking.ViolaJones.REGIONS_OVERLAP=.5,tracking.ViolaJones.classifiers={},tracking.ViolaJones.detect=function(a,b,c,d,e,f,g,h){var i,j=0,k=[],l=new Int32Array(b*c),m=new Int32Array(b*c),n=new Int32Array(b*c);g>0&&(i=new Int32Array(b*c)),tracking.Image.computeIntegralImage(a,b,c,l,m,n,i);for(var o=h[0],p=h[1],q=d*e,r=q*o|0,s=q*p|0;b>r&&c>s;){for(var t=q*f+.5|0,u=0;c-s>u;u+=t)for(var v=0;b-r>v;v+=t)g>0&&this.isTriviallyExcluded(g,i,u,v,b,r,s)||this.evalStages_(h,l,m,n,u,v,b,r,s,q)&&(k[j++]={width:r,height:s,x:v,y:u});q*=e,r=q*o|0,s=q*p|0}return this.mergeRectangles_(k)},tracking.ViolaJones.isTriviallyExcluded=function(a,b,c,d,e,f,g){var h=c*e+d,i=h+f,j=h+g*e,k=j+f,l=(b[h]-b[i]-b[j]+b[k])/(f*g*255);return a>l?!0:!1},tracking.ViolaJones.evalStages_=function(a,b,c,d,e,f,g,h,i,j){var k=1/(h*i),l=e*g+f,m=l+h,n=l+i*g,o=n+h,p=(b[l]-b[m]-b[n]+b[o])*k,q=(c[l]-c[m]-c[n]+c[o])*k-p*p,r=1;q>0&&(r=Math.sqrt(q));for(var s=a.length,t=2;s>t;){for(var u=0,v=a[t++],w=a[t++];w--;){for(var x=0,y=a[t++],z=a[t++],A=0;z>A;A++){var B,C,D,E,F=f+a[t++]*j+.5|0,G=e+a[t++]*j+.5|0,H=a[t++]*j+.5|0,I=a[t++]*j+.5|0,J=a[t++];y?(B=F-I+H+(G+H+I-1)*g,C=F+(G-1)*g,D=F-I+(G+I-1)*g,E=F+H+(G+H-1)*g,x+=(d[B]+d[C]-d[D]-d[E])*J):(B=G*g+F,C=B+H,D=B+I*g,E=D+H,x+=(b[B]-b[C]-b[D]+b[E])*J)}var K=a[t++],L=a[t++],M=a[t++];u+=K*r>x*k?L:M}if(v>u)return!1}return!0},tracking.ViolaJones.mergeRectangles_=function(a){for(var b=new tracking.DisjointSet(a.length),c=0;c<a.length;c++)for(var d=a[c],e=0;e<a.length;e++){var f=a[e];if(tracking.Math.intersectRect(d.x,d.y,d.x+d.width,d.y+d.height,f.x,f.y,f.x+f.width,f.y+f.height)){var g=Math.max(d.x,f.x),h=Math.max(d.y,f.y),i=Math.min(d.x+d.width,f.x+f.width),j=Math.min(d.y+d.height,f.y+f.height),k=(g-i)*(h-j),l=d.width*d.height,m=f.width*f.height;k/(l*(l/m))>=this.REGIONS_OVERLAP&&k/(m*(l/m))>=this.REGIONS_OVERLAP&&b.union(c,e)}}for(var n={},o=0;o<b.length;o++){var p=b.find(o);n[p]?(n[p].total++,n[p].width+=a[o].width,n[p].height+=a[o].height,n[p].x+=a[o].x,n[p].y+=a[o].y):n[p]={total:1,width:a[o].width,height:a[o].height,x:a[o].x,y:a[o].y}}var q=[];return Object.keys(n).forEach(function(a){var b=n[a];q.push({total:b.total,width:b.width/b.total+.5|0,height:b.height/b.total+.5|0,x:b.x/b.total+.5|0,y:b.y/b.total+.5|0})}),q}}(),function(){tracking.Brief={},tracking.Brief.N=512,tracking.Brief.randomImageOffsets_={},tracking.Brief.randomWindowOffsets_=null,tracking.Brief.getDescriptors=function(a,b,c){for(var d=new Int32Array((c.length>>1)*(this.N>>5)),e=0,f=this.getRandomOffsets_(b),g=0,h=0;h<c.length;h+=2)for(var i=b*c[h+1]+c[h],j=0,k=0,l=this.N;l>k;k++)a[f[j++]+i]<a[f[j++]+i]&&(e|=1<<(31&k)),k+1&31||(d[g++]=e,e=0);return d},tracking.Brief.match=function(a,b,c,d){for(var e=a.length>>1,f=c.length>>1,g=new Array(e),h=0;e>h;h++){for(var i=1/0,j=0,k=0;f>k;k++){for(var l=0,m=0,n=this.N>>5;n>m;m++)l+=tracking.Math.hammingWeight(b[h*n+m]^d[k*n+m]);i>l&&(i=l,j=k)}g[h]={index1:h,index2:j,keypoint1:[a[2*h],a[2*h+1]],keypoint2:[c[2*j],c[2*j+1]],confidence:1-i/this.N}}return g},tracking.Brief.reciprocalMatch=function(a,b,c,d){var e=[];if(0===a.length||0===c.length)return e;for(var f=tracking.Brief.match(a,b,c,d),g=tracking.Brief.match(c,d,a,b),h=0;h<f.length;h++)g[f[h].index2].index2===h&&e.push(f[h]);return e},tracking.Brief.getRandomOffsets_=function(a){if(!this.randomWindowOffsets_){for(var b=0,c=new Int32Array(4*this.N),d=0;d<this.N;d++)c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16)),c[b++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=c}if(!this.randomImageOffsets_[a]){for(var e=0,f=new Int32Array(2*this.N),g=0;g<this.N;g++)f[e++]=this.randomWindowOffsets_[4*g]*a+this.randomWindowOffsets_[4*g+1],f[e++]=this.randomWindowOffsets_[4*g+2]*a+this.randomWindowOffsets_[4*g+3];this.randomImageOffsets_[a]=f}return this.randomImageOffsets_[a]}}(),function(){tracking.Fast={},tracking.Fast.THRESHOLD=40,tracking.Fast.circles_={},tracking.Fast.findCorners=function(a,b,c,d){var e=this.getCircleOffsets_(b),f=new Int32Array(16),g=[];void 0===d&&(d=this.THRESHOLD);for(var h=3;c-3>h;h++)for(var i=3;b-3>i;i++){for(var j=h*b+i,k=a[j],l=0;16>l;l++)f[l]=a[j+e[l]];this.isCorner(k,f,d)&&(g.push(i,h),i+=3)}return g},tracking.Fast.isBrighter=function(a,b,c){return a-b>c},tracking.Fast.isCorner=function(a,b,c){if(this.isTriviallyExcluded(b,a,c))return!1;for(var d=0;16>d;d++){for(var e=!0,f=!0,g=0;9>g;g++){var h=b[d+g&15];if(!this.isBrighter(a,h,c)&&(f=!1,e===!1))break;if(!this.isDarker(a,h,c)&&(e=!1,f===!1))break}if(f||e)return!0}return!1},tracking.Fast.isDarker=function(a,b,c){return b-a>c},tracking.Fast.isTriviallyExcluded=function(a,b,c){var d=0,e=a[8],f=a[12],g=a[4],h=a[0];return this.isBrighter(h,b,c)&&d++,this.isBrighter(g,b,c)&&d++,this.isBrighter(e,b,c)&&d++,this.isBrighter(f,b,c)&&d++,3>d&&(d=0,this.isDarker(h,b,c)&&d++,this.isDarker(g,b,c)&&d++,this.isDarker(e,b,c)&&d++,this.isDarker(f,b,c)&&d++,3>d)?!0:!1},tracking.Fast.getCircleOffsets_=function(a){if(this.circles_[a])return this.circles_[a];var b=new Int32Array(16);return b[0]=-a-a-a,b[1]=b[0]+1,b[2]=b[1]+a+1,b[3]=b[2]+a+1,b[4]=b[3]+a,b[5]=b[4]+a,b[6]=b[5]+a-1,b[7]=b[6]+a-1,b[8]=b[7]-1,b[9]=b[8]-1,b[10]=b[9]-a-1,b[11]=b[10]-a-1,b[12]=b[11]-a,b[13]=b[12]-a,b[14]=b[13]-a+1,b[15]=b[14]-a+1,this.circles_[a]=b,b}}(),function(){tracking.Math={},tracking.Math.distance=function(a,b,c,d){var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)},tracking.Math.hammingWeight=function(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),16843009*(a+(a>>4)&252645135)>>24},tracking.Math.uniformRandom=function(a,b){return a+Math.random()*(b-a)},tracking.Math.intersectRect=function(a,b,c,d,e,f,g,h){return!(e>c||a>g||f>d||b>h)}}(),function(){tracking.Matrix={},tracking.Matrix.forEach=function(a,b,c,d,e){e=e||1;for(var f=0;c>f;f+=e)for(var g=0;b>g;g+=e){var h=f*b*4+4*g;d.call(this,a[h],a[h+1],a[h+2],a[h+3],h,f,g)}}}(),function(){tracking.EPnP={},tracking.EPnP.solve=function(){}}(),function(){tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")},tracking.inherits(tracking.Tracker,tracking.EventEmitter),tracking.Tracker.prototype.track=function(){}}(),function(){tracking.TrackerTask=function(a){if(tracking.TrackerTask.base(this,"constructor"),!a)throw new Error("Tracker instance not specified.");this.setTracker(a)},tracking.inherits(tracking.TrackerTask,tracking.EventEmitter),tracking.TrackerTask.prototype.tracker_=null,tracking.TrackerTask.prototype.running_=!1,tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_},tracking.TrackerTask.prototype.inRunning=function(){return this.running_},tracking.TrackerTask.prototype.setRunning=function(a){this.running_=a},tracking.TrackerTask.prototype.setTracker=function(a){this.tracker_=a},tracking.TrackerTask.prototype.run=function(){var a=this;return this.inRunning()?void 0:(this.setRunning(!0),this.reemitTrackEvent_=function(b){a.emit("track",b)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this)},tracking.TrackerTask.prototype.stop=function(){return this.inRunning()?(this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),this):void 0}}(),function(){tracking.ColorTracker=function(a){tracking.ColorTracker.base(this,"constructor"),"string"==typeof a&&(a=[a]),a&&(a.forEach(function(a){if(!tracking.ColorTracker.getColor(a))throw new Error('Color not valid, try `new tracking.ColorTracker("magenta")`.')}),this.setColors(a))},tracking.inherits(tracking.ColorTracker,tracking.Tracker),tracking.ColorTracker.knownColors_={},tracking.ColorTracker.neighbours_={},tracking.ColorTracker.registerColor=function(a,b){tracking.ColorTracker.knownColors_[a]=b},tracking.ColorTracker.getColor=function(a){return tracking.ColorTracker.knownColors_[a]},tracking.ColorTracker.prototype.colors=["magenta"],tracking.ColorTracker.prototype.minDimension=20,tracking.ColorTracker.prototype.maxDimension=1/0,tracking.ColorTracker.prototype.minGroupSize=30,tracking.ColorTracker.prototype.calculateDimensions_=function(a,b){for(var c=-1,d=-1,e=1/0,f=1/0,g=0;b>g;g+=2){var h=a[g],i=a[g+1];e>h&&(e=h),h>c&&(c=h),f>i&&(f=i),i>d&&(d=i)}return{width:c-e,height:d-f,x:e,y:f}},tracking.ColorTracker.prototype.getColors=function(){return this.colors},tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension},tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension},tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize},tracking.ColorTracker.prototype.getNeighboursForWidth_=function(a){if(tracking.ColorTracker.neighbours_[a])return tracking.ColorTracker.neighbours_[a];var b=new Int32Array(8);return b[0]=4*-a,b[1]=4*-a+4,b[2]=4,b[3]=4*a+4,b[4]=4*a,b[5]=4*a-4,b[6]=-4,b[7]=4*-a-4,tracking.ColorTracker.neighbours_[a]=b,b},tracking.ColorTracker.prototype.mergeRectangles_=function(a){for(var b,c=[],d=this.getMinDimension(),e=this.getMaxDimension(),f=0;f<a.length;f++){var g=a[f];b=!0;for(var h=f+1;h<a.length;h++){var i=a[h];if(tracking.Math.intersectRect(g.x,g.y,g.x+g.width,g.y+g.height,i.x,i.y,i.x+i.width,i.y+i.height)){b=!1;var j=Math.min(g.x,i.x),k=Math.min(g.y,i.y),l=Math.max(g.x+g.width,i.x+i.width),m=Math.max(g.y+g.height,i.y+i.height);i.height=m-k,i.width=l-j,i.x=j,i.y=k;break}}b&&g.width>=d&&g.height>=d&&g.width<=e&&g.height<=e&&c.push(g)}return c},tracking.ColorTracker.prototype.setColors=function(a){this.colors=a},tracking.ColorTracker.prototype.setMinDimension=function(a){this.minDimension=a},tracking.ColorTracker.prototype.setMaxDimension=function(a){this.maxDimension=a},tracking.ColorTracker.prototype.setMinGroupSize=function(a){this.minGroupSize=a},tracking.ColorTracker.prototype.track=function(a,b,c){var d=this,e=this.getColors();if(!e)throw new Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var f=[];e.forEach(function(e){f=f.concat(d.trackColor_(a,b,c,e))}),this.emit("track",{data:f})},tracking.ColorTracker.prototype.trackColor_=function(c,d,e,f){var g,h,i,j,k,l=tracking.ColorTracker.knownColors_[f],m=new Int32Array(c.length>>2),n=new Int8Array(c.length),o=this.getMinGroupSize(),p=this.getNeighboursForWidth_(d),q=new Int32Array(c.length),r=[],s=-4;if(!l)return r;for(var t=0;e>t;t++)for(var u=0;d>u;u++)if(s+=4,!n[s]){for(g=0,k=-1,q[++k]=s,q[++k]=t,q[++k]=u,n[s]=1;k>=0;)if(i=q[k--],h=q[k--],j=q[k--],l(c[j],c[j+1],c[j+2],c[j+3],j,h,i)){m[g++]=i,m[g++]=h;for(var v=0;v<p.length;v++){var w=j+p[v],x=h+a[v],y=i+b[v];!n[w]&&x>=0&&e>x&&y>=0&&d>y&&(q[++k]=w,q[++k]=x,q[++k]=y,n[w]=1)}}if(g>=o){var z=this.calculateDimensions_(m,g);z&&(z.color=f,r.push(z))}}return this.mergeRectangles_(r)},tracking.ColorTracker.registerColor("cyan",function(a,b,c){var d=50,e=70,f=a-0,g=b-255,h=c-255;return b-a>=d&&c-a>=e?!0:6400>f*f+g*g+h*h}),tracking.ColorTracker.registerColor("magenta",function(a,b,c){var d=50,e=a-255,f=b-0,g=c-255;return a-b>=d&&c-b>=d?!0:19600>e*e+f*f+g*g}),tracking.ColorTracker.registerColor("yellow",function(a,b,c){var d=50,e=a-255,f=b-255,g=c-0;return a-c>=d&&b-c>=d?!0:1e4>e*e+f*f+g*g});var a=new Int32Array([-1,-1,0,1,1,1,0,-1]),b=new Int32Array([0,1,1,1,0,-1,-1,-1])}(),function(){tracking.ObjectTracker=function(a){tracking.ObjectTracker.base(this,"constructor"),a&&(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.forEach(function(b,c){if("string"==typeof b&&(a[c]=tracking.ViolaJones.classifiers[b]),!a[c])throw new Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.')})),this.setClassifiers(a)},tracking.inherits(tracking.ObjectTracker,tracking.Tracker),tracking.ObjectTracker.prototype.edgesDensity=.2,tracking.ObjectTracker.prototype.initialScale=1,tracking.ObjectTracker.prototype.scaleFactor=1.25,tracking.ObjectTracker.prototype.stepSize=1.5,tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers},tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity},tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale},tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor},tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize},tracking.ObjectTracker.prototype.track=function(a,b,c){var d=this,e=this.getClassifiers();if(!e)throw new Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var f=[];e.forEach(function(e){f=f.concat(tracking.ViolaJones.detect(a,b,c,d.getInitialScale(),d.getScaleFactor(),d.getStepSize(),d.getEdgesDensity(),e))}),this.emit("track",{data:f})},tracking.ObjectTracker.prototype.setClassifiers=function(a){this.classifiers=a},tracking.ObjectTracker.prototype.setEdgesDensity=function(a){this.edgesDensity=a},tracking.ObjectTracker.prototype.setInitialScale=function(a){this.initialScale=a},tracking.ObjectTracker.prototype.setScaleFactor=function(a){this.scaleFactor=a},tracking.ObjectTracker.prototype.setStepSize=function(a){this.stepSize=a}}(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;
}();var Elements=function(a,b,c){var d=a(c),e=a(".container"),f=e.find(".content"),g=e.find(".btn-confirm"),h=e.find(".overlay");return d.on("popstate",function(){Templating.isChanging||Templating.loadTemplate(c.location.hash.split("#")[1])}),d.on("keyup",function(a){return 32===a.keyCode?(Tracking.isTracking?Templating.loadTemplate():g.trigger("click"),!1):void(27===a.keyCode&&(Tracking.isTracking?h.fadeOut():g.trigger("click")))}),e.find(".space-indicator .wrapper").on("click",function(){Templating.loadTemplate()}),g.on("click",function(){Tracking.startTracking(),h.fadeOut()}),e.find(".btn-overlay").on("click",function(){h.filter('[data-overlay="'+a(this).data("overlay")+'"]').fadeIn()}),h.filter('[data-overlay!="landing"]').on("click",function(){a(this).fadeOut()}),h.find(".btn-close").on("click",function(){a(this).parents(".overlay").fadeOut()}),b.getusermedia||(h.filter('[data-overlay="landing"]').hide(),h.filter('[data-overlay="error"]').show()),a("body").flowtype({minFont:11,maxFont:28,fontRatio:76}),{$window:d,$content:f}}(jQuery,Modernizr,window),Modules={},Tracking=function(a,b,c){function d(){b.track("#tracking-video",j,{camera:!0}),h=!0,b.Fast.THRESHOLD=20}function e(){var a=c.getElementById("dpi"),b=Math.pow(screen.width/a.offsetWidth,2),d=Math.pow(screen.height/a.offsetHeight,2);return Math.sqrt(b+d)}var f=c.getElementById("tracking-canvas"),g=f.getContext("2d"),h=!1,i=function(){i.base(this,"constructor"),this.corners=[],this.descriptors=[],this.translationIntensity=0,this.blur=3,this.uncertainty=3,this.translationPercentage=.95,this.bouncing=!1,this.bounceIntensities=[],this.lastBouncesLength=0,this.startTracking=!1,this.startTrackingIndex=0,this.increasingBounceThreshold=3,this.interval=null};b.inherits(i,b.Tracker),i.prototype.isTranslation=function(b){if(b.length>0){var c=a.max(b,function(a){return a.confidence}),d=c.keypoint2[1]-c.keypoint1[1];if(this.translationIntensity=d,d=Math.abs(d),d>=1){var e=a.filter(b,function(a){var b=Math.abs(a.keypoint2[1]-a.keypoint1[1]),c=Math.abs(a.keypoint2[0]-a.keypoint1[0]);return 2>c&&b>0&&b-this.uncertainty<=d&&b+this.uncertainty>=d?!0:void 0},this);return e.length>=Math.round(this.translationPercentage*b.length)}}return!1},i.prototype.touch=function(){var b=Math.abs(a.max(this.bounceIntensities,function(a){return Math.abs(a)}));Templating.activeModule.reference.feedback(b)},i.prototype.initiateTimeout=function(a){var b=this;setTimeout(function(){b.touch(),setTimeout(function(){b.startTracking=!0,b.startTrackingIndex=b.bounceIntensities.length-1},50),b.interval=setInterval(function(){b.checkNewBounces()},300)},a)},i.prototype.checkNewBounces=function(){this.bounceIntensities.length===this.lastBouncesLength?(this.resetValues(),this.bouncing=!1,this.bounceIntensities=[]):this.lastBouncesLength=this.bounceIntensities.length},i.prototype.trackNewTouch=function(){var b=this.bounceIntensities,c=a.filter(b.slice(this.startTrackingIndex),function(a){return a>0}),d=a.last(c,this.increasingBounceThreshold);b.push(this.translationIntensity),this.startTracking&&d.length&&a.every(d,function(a){return a>c[c.length-this.increasingBounceThreshold-1]},this)&&(this.resetValues(),this.bounceIntensities=[a.last(b)],this.initiateTimeout(this,50))},i.prototype.resetValues=function(){clearInterval(this.interval),this.startTracking=!1,this.startTrackingIndex=0,this.lastBouncesLength=0},i.prototype.adjustSettings=function(a){a.length>30&&b.Fast.THRESHOLD<50?b.Fast.THRESHOLD+=1:a.length<15&&b.Fast.THRESHOLD>20&&(b.Fast.THRESHOLD-=1),e()>19&&a.length>12&&(j.translationPercentage=.6)},i.prototype.track=function(c,d,e){var f=b.Image.blur(c,d,e,this.blur),g=b.Image.grayscale(f,d,e),h=b.Fast.findCorners(g,d,e),i=b.Brief.getDescriptors(g,d,h),j=b.Brief.reciprocalMatch(this.corners,this.descriptors,h,i);j=a.filter(j,function(a){return a.confidence>=.85&&a.confidence!==Math.abs(1/0)}),this.emit("track",{corners:h,matchedCorners:j}),this.corners=h,this.descriptors=i,this.adjustSettings(j)};var j=new i;return j.on("track",function(a){var b=a.matchedCorners;this.isTranslation(b)&&(this.bouncing?this.trackNewTouch():(this.bouncing=!0,this.bounceIntensities.push(this.translationIntensity),this.initiateTimeout(50)));var c=a.corners;g.clearRect(0,0,f.width,f.height),g.fillStyle="#F00";for(var d=0;d<c.length;d+=2)g.fillRect(c[d],c[d+1],2,2)}),{startTracking:d,get isTracking(){return h},tracker:j}}(_,tracking,document);Modules.graph=function(){function a(a){}function b(){var a=Math.abs(_.last(Tracking.tracker.bounceIntensities))||0;f.append((new Date).getTime(),a),Templating.requestId=window.requestAnimFrame(b)}var c="Intensity Graph",d=document.getElementById("chart-canvas"),e=new SmoothieChart({grid:{strokeStyle:"transparent",verticalSections:0,borderVisible:!1,fillStyle:"transparent"},labels:{disabled:!0},millisPerPixel:5,maxValue:10,minValue:-8}),f=new TimeSeries,g=function(){d.width=Elements.$content.width(),d.height=Elements.$content.height(),Templating.stopAnimations(),b()};return e.addTimeSeries(f,{lineWidth:"4",strokeStyle:"#FFF"}),e.streamTo(d,0),g(),g=_.debounce(g,200),Elements.$window.on("resize",g),{feedback:a,title:c}},Modules.sidlee=function(){function a(a){var b,c;window.screen.availWidth>1e3&&(a=2*a+1),a*=1+.4*Math.random();var d={x:h.width/2,y:h.height/2},e=h.width*a/20;for(b=0;b<j.length;b++)c=j[b],c.startPositionX=c.x,c.startPositionY=c.y,c.centerX=d.x+Math.cos(2*Math.PI/o.length*b)*(Math.random()*a*3+e),c.centerY=d.y+Math.sin(2*Math.PI/o.length*b)*(Math.random()*a*3+e),c.deltaPositionX=c.centerX+Math.cos(c.angle)*c.circleRadius-c.x,c.deltaPositionY=c.centerY+Math.sin(c.angle)*c.circleRadius-c.y;m=l,setTimeout(function(){for(var a=0;a<j.length;a++){var b=j[a];b.startPositionX=b.x,b.startPositionY=b.y,b.centerX=b.initialX,b.centerY=b.initialY,b.deltaPositionX=b.centerX+Math.cos(b.angle)*b.circleRadius-b.x,b.deltaPositionY=b.centerY+Math.sin(b.angle)*b.circleRadius-b.y}m=l},l/60*1e3+400)}function b(){var a,b,d,e;j=[],k=[],i.fillStyle="#fff";var f=2*o.length;for(a=0;f>a;a++){var g=Math.min(h.width/80,h.height/15,14),l=3;11>g&&(l=2),d=(o[a%o.length].x+.7*(Math.random()-.5))*g+(h.width/2-80*g/2),e=(o[a%o.length].y+.7*(Math.random()-.5))*g+(h.height/2-15*g/2),b={x:0,y:0,angle:0,speed:.15*(.5-Math.random()),circleRadius:4*Math.random()+1,initialX:d,initialY:e,centerX:d,centerY:e,radius:Math.random()*l+.5,alpha:Math.max(.75*Math.random()+.1,.2),vx:Math.random()-.5,vy:Math.random()-.5,distanceFromOrigin:0},b.speedX=(b.expandedX-b.initialX)/20,b.speedY=(b.expandedY-b.initialY)/20,j.push(b)}for(a=0;n>a;a++)d=Math.random()*h.width,e=Math.random()*h.height,k.push({x:d,y:e,initialX:d,initialY:e,radius:1.5*Math.random()+1,alpha:Math.max(.1,.4*Math.random()),vx:Math.random()-.5,vy:Math.random()-.5});c()}function c(){i.clearRect(0,0,h.width,h.height),f(),d(),Templating.requestId=window.requestAnimFrame(c)}function d(){var a=j.concat(k);_.each(a,function(a){i.globalAlpha=a.alpha,i.beginPath(),i.arc(a.x,a.y,a.radius,0,2*Math.PI),i.fill()})}function e(a,b,c){var d,e=.1,f=.4;return 0===c?0:1===c?1:(!e||1>e?(e=1,d=f/4):d=f*Math.asin(1/e)/(2*Math.PI),a+b*(e*Math.pow(2,-10*c)*Math.sin((c-d)*(2*Math.PI)/f)+1))}function f(){var a,b;if(m>0){var c=(l-m)/l;for(a=0;a<j.length;a++)b=j[a],b.x=e(b.startPositionX,b.deltaPositionX,c),b.y=e(b.startPositionY,b.deltaPositionY,c);m--}else for(a=0;a<j.length;a++)b=j[a],b.x=b.centerX+Math.cos(b.angle)*b.circleRadius,b.y=b.centerY+Math.sin(b.angle)*b.circleRadius,b.angle+=b.speed;for(a=0;a<k.length;a++)b=j[a],b.x+=b.vx,b.y+=b.vy,b.x>h.width?b.x=0:b.x<0&&(b.x=h.width),b.y>h.height?b.y=0:b.y<0&&(b.y=h.height)}var g="SID LEE Particles",h=document.getElementById("particles-canvas"),i=h.getContext("2d"),j=[],k=[],l=30,m=0,n=200,o=_.shuffle([{x:4,y:0},{x:5,y:0},{x:6,y:0},{x:7,y:0},{x:8,y:0},{x:9,y:0},{x:10,y:0},{x:11,y:0},{x:16,y:0},{x:17,y:0},{x:18,y:0},{x:19,y:0},{x:20,y:0},{x:23,y:0},{x:24,y:0},{x:25,y:0},{x:26,y:0},{x:27,y:0},{x:28,y:0},{x:29,y:0},{x:30,y:0},{x:31,y:0},{x:32,y:0},{x:41,y:0},{x:42,y:0},{x:43,y:0},{x:44,y:0},{x:45,y:0},{x:55,y:0},{x:56,y:0},{x:57,y:0},{x:58,y:0},{x:59,y:0},{x:60,y:0},{x:61,y:0},{x:62,y:0},{x:63,y:0},{x:64,y:0},{x:65,y:0},{x:68,y:0},{x:69,y:0},{x:70,y:0},{x:71,y:0},{x:72,y:0},{x:73,y:0},{x:74,y:0},{x:75,y:0},{x:76,y:0},{x:77,y:0},{x:78,y:0},{x:3,y:1},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:8,y:1},{x:9,y:1},{x:10,y:1},{x:11,y:1},{x:12,y:1},{x:16,y:1},{x:17,y:1},{x:18,y:1},{x:19,y:1},{x:20,y:1},{x:23,y:1},{x:24,y:1},{x:25,y:1},{x:26,y:1},{x:27,y:1},{x:28,y:1},{x:29,y:1},{x:30,y:1},{x:31,y:1},{x:32,y:1},{x:33,y:1},{x:41,y:1},{x:42,y:1},{x:43,y:1},{x:44,y:1},{x:45,y:1},{x:55,y:1},{x:56,y:1},{x:57,y:1},{x:58,y:1},{x:59,y:1},{x:60,y:1},{x:61,y:1},{x:62,y:1},{x:63,y:1},{x:64,y:1},{x:65,y:1},{x:68,y:1},{x:69,y:1},{x:70,y:1},{x:71,y:1},{x:72,y:1},{x:73,y:1},{x:74,y:1},{x:75,y:1},{x:76,y:1},{x:77,y:1},{x:78,y:1},{x:2,y:2},{x:3,y:2},{x:4,y:2},{x:5,y:2},{x:6,y:2},{x:7,y:2},{x:8,y:2},{x:9,y:2},{x:10,y:2},{x:11,y:2},{x:12,y:2},{x:13,y:2},{x:16,y:2},{x:17,y:2},{x:18,y:2},{x:19,y:2},{x:20,y:2},{x:23,y:2},{x:24,y:2},{x:25,y:2},{x:26,y:2},{x:27,y:2},{x:28,y:2},{x:29,y:2},{x:30,y:2},{x:31,y:2},{x:32,y:2},{x:33,y:2},{x:34,y:2},{x:41,y:2},{x:42,y:2},{x:43,y:2},{x:44,y:2},{x:45,y:2},{x:55,y:2},{x:56,y:2},{x:57,y:2},{x:58,y:2},{x:59,y:2},{x:60,y:2},{x:61,y:2},{x:62,y:2},{x:63,y:2},{x:64,y:2},{x:65,y:2},{x:68,y:2},{x:69,y:2},{x:70,y:2},{x:71,y:2},{x:72,y:2},{x:73,y:2},{x:74,y:2},{x:75,y:2},{x:76,y:2},{x:77,y:2},{x:78,y:2},{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3},{x:5,y:3},{x:6,y:3},{x:7,y:3},{x:8,y:3},{x:9,y:3},{x:10,y:3},{x:11,y:3},{x:12,y:3},{x:13,y:3},{x:16,y:3},{x:17,y:3},{x:18,y:3},{x:19,y:3},{x:20,y:3},{x:23,y:3},{x:24,y:3},{x:25,y:3},{x:26,y:3},{x:27,y:3},{x:28,y:3},{x:29,y:3},{x:30,y:3},{x:31,y:3},{x:32,y:3},{x:33,y:3},{x:34,y:3},{x:35,y:3},{x:41,y:3},{x:42,y:3},{x:43,y:3},{x:44,y:3},{x:45,y:3},{x:55,y:3},{x:56,y:3},{x:57,y:3},{x:58,y:3},{x:59,y:3},{x:60,y:3},{x:61,y:3},{x:62,y:3},{x:63,y:3},{x:64,y:3},{x:65,y:3},{x:68,y:3},{x:69,y:3},{x:70,y:3},{x:71,y:3},{x:72,y:3},{x:73,y:3},{x:74,y:3},{x:75,y:3},{x:76,y:3},{x:77,y:3},{x:78,y:3},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:4,y:4},{x:5,y:4},{x:6,y:4},{x:7,y:4},{x:10,y:4},{x:11,y:4},{x:12,y:4},{x:13,y:4},{x:16,y:4},{x:17,y:4},{x:18,y:4},{x:19,y:4},{x:20,y:4},{x:23,y:4},{x:24,y:4},{x:25,y:4},{x:26,y:4},{x:27,y:4},{x:28,y:4},{x:29,y:4},{x:30,y:4},{x:31,y:4},{x:32,y:4},{x:33,y:4},{x:34,y:4},{x:35,y:4},{x:36,y:4},{x:41,y:4},{x:42,y:4},{x:43,y:4},{x:44,y:4},{x:45,y:4},{x:55,y:4},{x:56,y:4},{x:57,y:4},{x:58,y:4},{x:59,y:4},{x:68,y:4},{x:69,y:4},{x:70,y:4},{x:71,y:4},{x:72,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5},{x:4,y:5},{x:5,y:5},{x:6,y:5},{x:7,y:5},{x:16,y:5},{x:17,y:5},{x:18,y:5},{x:19,y:5},{x:20,y:5},{x:23,y:5},{x:24,y:5},{x:25,y:5},{x:26,y:5},{x:27,y:5},{x:31,y:5},{x:32,y:5},{x:33,y:5},{x:34,y:5},{x:35,y:5},{x:36,y:5},{x:41,y:5},{x:42,y:5},{x:43,y:5},{x:44,y:5},{x:45,y:5},{x:55,y:5},{x:56,y:5},{x:57,y:5},{x:58,y:5},{x:59,y:5},{x:68,y:5},{x:69,y:5},{x:70,y:5},{x:71,y:5},{x:72,y:5},{x:1,y:6},{x:2,y:6},{x:3,y:6},{x:4,y:6},{x:5,y:6},{x:6,y:6},{x:7,y:6},{x:8,y:6},{x:9,y:6},{x:10,y:6},{x:11,y:6},{x:16,y:6},{x:17,y:6},{x:18,y:6},{x:19,y:6},{x:20,y:6},{x:23,y:6},{x:24,y:6},{x:25,y:6},{x:26,y:6},{x:27,y:6},{x:31,y:6},{x:32,y:6},{x:33,y:6},{x:34,y:6},{x:35,y:6},{x:36,y:6},{x:41,y:6},{x:42,y:6},{x:43,y:6},{x:44,y:6},{x:45,y:6},{x:55,y:6},{x:56,y:6},{x:57,y:6},{x:58,y:6},{x:59,y:6},{x:60,y:6},{x:61,y:6},{x:62,y:6},{x:63,y:6},{x:64,y:6},{x:68,y:6},{x:69,y:6},{x:70,y:6},{x:71,y:6},{x:72,y:6},{x:73,y:6},{x:74,y:6},{x:75,y:6},{x:76,y:6},{x:77,y:6},{x:2,y:7},{x:3,y:7},{x:4,y:7},{x:5,y:7},{x:6,y:7},{x:7,y:7},{x:8,y:7},{x:9,y:7},{x:10,y:7},{x:11,y:7},{x:12,y:7},{x:16,y:7},{x:17,y:7},{x:18,y:7},{x:19,y:7},{x:20,y:7},{x:23,y:7},{x:24,y:7},{x:25,y:7},{x:26,y:7},{x:27,y:7},{x:31,y:7},{x:32,y:7},{x:33,y:7},{x:34,y:7},{x:35,y:7},{x:36,y:7},{x:41,y:7},{x:42,y:7},{x:43,y:7},{x:44,y:7},{x:45,y:7},{x:55,y:7},{x:56,y:7},{x:57,y:7},{x:58,y:7},{x:59,y:7},{x:60,y:7},{x:61,y:7},{x:62,y:7},{x:63,y:7},{x:64,y:7},{x:68,y:7},{x:69,y:7},{x:70,y:7},{x:71,y:7},{x:72,y:7},{x:73,y:7},{x:74,y:7},{x:75,y:7},{x:76,y:7},{x:77,y:7},{x:4,y:8},{x:5,y:8},{x:6,y:8},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:11,y:8},{x:12,y:8},{x:13,y:8},{x:16,y:8},{x:17,y:8},{x:18,y:8},{x:19,y:8},{x:20,y:8},{x:23,y:8},{x:24,y:8},{x:25,y:8},{x:26,y:8},{x:27,y:8},{x:31,y:8},{x:32,y:8},{x:33,y:8},{x:34,y:8},{x:35,y:8},{x:36,y:8},{x:41,y:8},{x:42,y:8},{x:43,y:8},{x:44,y:8},{x:45,y:8},{x:55,y:8},{x:56,y:8},{x:57,y:8},{x:58,y:8},{x:59,y:8},{x:60,y:8},{x:61,y:8},{x:62,y:8},{x:63,y:8},{x:64,y:8},{x:68,y:8},{x:69,y:8},{x:70,y:8},{x:71,y:8},{x:72,y:8},{x:73,y:8},{x:74,y:8},{x:75,y:8},{x:76,y:8},{x:77,y:8},{x:7,y:9},{x:8,y:9},{x:9,y:9},{x:10,y:9},{x:11,y:9},{x:12,y:9},{x:13,y:9},{x:16,y:9},{x:17,y:9},{x:18,y:9},{x:19,y:9},{x:20,y:9},{x:23,y:9},{x:24,y:9},{x:25,y:9},{x:26,y:9},{x:27,y:9},{x:31,y:9},{x:32,y:9},{x:33,y:9},{x:34,y:9},{x:35,y:9},{x:36,y:9},{x:41,y:9},{x:42,y:9},{x:43,y:9},{x:44,y:9},{x:45,y:9},{x:55,y:9},{x:56,y:9},{x:57,y:9},{x:58,y:9},{x:59,y:9},{x:68,y:9},{x:69,y:9},{x:70,y:9},{x:71,y:9},{x:72,y:9},{x:2,y:10},{x:3,y:10},{x:4,y:10},{x:8,y:10},{x:9,y:10},{x:10,y:10},{x:11,y:10},{x:12,y:10},{x:13,y:10},{x:16,y:10},{x:17,y:10},{x:18,y:10},{x:19,y:10},{x:20,y:10},{x:23,y:10},{x:24,y:10},{x:25,y:10},{x:26,y:10},{x:27,y:10},{x:31,y:10},{x:32,y:10},{x:33,y:10},{x:34,y:10},{x:35,y:10},{x:36,y:10},{x:41,y:10},{x:42,y:10},{x:43,y:10},{x:44,y:10},{x:45,y:10},{x:55,y:10},{x:56,y:10},{x:57,y:10},{x:58,y:10},{x:59,y:10},{x:68,y:10},{x:69,y:10},{x:70,y:10},{x:71,y:10},{x:72,y:10},{x:1,y:11},{x:2,y:11},{x:3,y:11},{x:4,y:11},{x:5,y:11},{x:6,y:11},{x:7,y:11},{x:8,y:11},{x:9,y:11},{x:10,y:11},{x:11,y:11},{x:12,y:11},{x:13,y:11},{x:16,y:11},{x:17,y:11},{x:18,y:11},{x:19,y:11},{x:20,y:11},{x:23,y:11},{x:24,y:11},{x:25,y:11},{x:26,y:11},{x:27,y:11},{x:28,y:11},{x:29,y:11},{x:30,y:11},{x:31,y:11},{x:32,y:11},{x:33,y:11},{x:34,y:11},{x:35,y:11},{x:41,y:11},{x:42,y:11},{x:43,y:11},{x:44,y:11},{x:45,y:11},{x:46,y:11},{x:47,y:11},{x:48,y:11},{x:49,y:11},{x:50,y:11},{x:51,y:11},{x:52,y:11},{x:55,y:11},{x:56,y:11},{x:57,y:11},{x:58,y:11},{x:59,y:11},{x:60,y:11},{x:61,y:11},{x:62,y:11},{x:63,y:11},{x:64,y:11},{x:65,y:11},{x:68,y:11},{x:69,y:11},{x:70,y:11},{x:71,y:11},{x:72,y:11},{x:73,y:11},{x:74,y:11},{x:75,y:11},{x:76,y:11},{x:77,y:11},{x:78,y:11},{x:1,y:12},{x:2,y:12},{x:3,y:12},{x:4,y:12},{x:5,y:12},{x:6,y:12},{x:7,y:12},{x:8,y:12},{x:9,y:12},{x:10,y:12},{x:11,y:12},{x:12,y:12},{x:13,y:12},{x:16,y:12},{x:17,y:12},{x:18,y:12},{x:19,y:12},{x:20,y:12},{x:23,y:12},{x:24,y:12},{x:25,y:12},{x:26,y:12},{x:27,y:12},{x:28,y:12},{x:29,y:12},{x:30,y:12},{x:31,y:12},{x:32,y:12},{x:33,y:12},{x:34,y:12},{x:41,y:12},{x:42,y:12},{x:43,y:12},{x:44,y:12},{x:45,y:12},{x:46,y:12},{x:47,y:12},{x:48,y:12},{x:49,y:12},{x:50,y:12},{x:51,y:12},{x:52,y:12},{x:55,y:12},{x:56,y:12},{x:57,y:12},{x:58,y:12},{x:59,y:12},{x:60,y:12},{x:61,y:12},{x:62,y:12},{x:63,y:12},{x:64,y:12},{x:65,y:12},{x:68,y:12},{x:69,y:12},{x:70,y:12},{x:71,y:12},{x:72,y:12},{x:73,y:12},{x:74,y:12},{x:75,y:12},{x:76,y:12},{x:77,y:12},{x:78,y:12},{x:2,y:13},{x:3,y:13},{x:4,y:13},{x:5,y:13},{x:6,y:13},{x:7,y:13},{x:8,y:13},{x:9,y:13},{x:10,y:13},{x:11,y:13},{x:12,y:13},{x:16,y:13},{x:17,y:13},{x:18,y:13},{x:19,y:13},{x:20,y:13},{x:23,y:13},{x:24,y:13},{x:25,y:13},{x:26,y:13},{x:27,y:13},{x:28,y:13},{x:29,y:13},{x:30,y:13},{x:31,y:13},{x:32,y:13},{x:33,y:13},{x:41,y:13},{x:42,y:13},{x:43,y:13},{x:44,y:13},{x:45,y:13},{x:46,y:13},{x:47,y:13},{x:48,y:13},{x:49,y:13},{x:50,y:13},{x:51,y:13},{x:52,y:13},{x:55,y:13},{x:56,y:13},{x:57,y:13},{x:58,y:13},{x:59,y:13},{x:60,y:13},{x:61,y:13},{x:62,y:13},{x:63,y:13},{x:64,y:13},{x:65,y:13},{x:68,y:13},{x:69,y:13},{x:70,y:13},{x:71,y:13},{x:72,y:13},{x:73,y:13},{x:74,y:13},{x:75,y:13},{x:76,y:13},{x:77,y:13},{x:78,y:13},{x:3,y:14},{x:4,y:14},{x:5,y:14},{x:6,y:14},{x:7,y:14},{x:8,y:14},{x:9,y:14},{x:10,y:14},{x:16,y:14},{x:17,y:14},{x:18,y:14},{x:19,y:14},{x:20,y:14},{x:23,y:14},{x:24,y:14},{x:25,y:14},{x:26,y:14},{x:27,y:14},{x:28,y:14},{x:29,y:14},{x:30,y:14},{x:31,y:14},{x:41,y:14},{x:42,y:14},{x:43,y:14},{x:44,y:14},{x:45,y:14},{x:46,y:14},{x:47,y:14},{x:48,y:14},{x:49,y:14},{x:50,y:14},{x:51,y:14},{x:52,y:14},{x:55,y:14},{x:56,y:14},{x:57,y:14},{x:58,y:14},{x:59,y:14},{x:60,y:14},{x:61,y:14},{x:62,y:14},{x:63,y:14},{x:64,y:14},{x:65,y:14},{x:68,y:14},{x:69,y:14},{x:70,y:14},{x:71,y:14},{x:72,y:14},{x:73,y:14},{x:74,y:14},{x:75,y:14},{x:76,y:14},{x:77,y:14},{x:78,y:14}]),p=function(){h.width=Elements.$content.width(),h.height=Elements.$content.height(),Templating.stopAnimations(),b()};return p(),p=_.debounce(p,200),Elements.$window.on("resize",p),{feedback:a,title:g}},Modules.watercup=function(){function a(){g||(g=!0,c.hide(),3>f?(d.show(),d[0].play(),d[0].onended=function(){d.hide(),c[0].currentTime=0,c.show(),g=!1},f++):(e.show(),e[0].play(),e[0].onended=function(){c[0].currentTime=0,c.fadeIn(),e.fadeOut(),g=!1,f=0}))}var b="Jurassic Watercup",c=$("#water"),d=$("#ripple"),e=$("#trex"),f=0,g=!1;return{feedback:a,title:b}};var Templating=function(a,b,c,d){function e(a){var c=b.has(Modules,a)?a:"sidlee";if(!a&&Tracking.isTracking){var d=b.keys(Modules),e=b.indexOf(d,i.name);e=e+1===d.length?0:e+1,c=d[e]}return{name:c,reference:null}}function f(a){g(),j=!0,i=e(a),Elements.$content.load("templates/"+i.name+".html",function(){j=!1,i.reference=new Modules[i.name],d.title="Knock - "+i.reference.title}),c.location.hash="#"+i.name}function g(){h&&(c.cancelAnimFrame(h),h=void 0)}var h,i=e(c.location.hash.split("#")[1]),j=!1;return f(i.name),{loadTemplate:f,stopAnimations:g,get activeModule(){return i},get requestId(){return h},set requestId(a){h=a},get isChanging(){return j}}}(jQuery,_,window,document);})();